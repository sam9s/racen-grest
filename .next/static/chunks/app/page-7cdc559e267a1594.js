(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8746:function(e,t,r){Promise.resolve().then(r.bind(r,865))},865:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),a=r(2265),n=r(6648);function o(e){let{message:t,onFeedback:r}=e,[o,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(null),u="user"===t.role,h=e=>{t.feedbackGiven||("down"===e?(m(e),i(!0)):r(t.id,e))};return(0,s.jsxs)("div",{className:"message-enter flex ".concat(u?"justify-end":"justify-start"),children:[!u&&(0,s.jsx)("div",{className:"flex-shrink-0 mr-2 mt-1",children:(0,s.jsx)("div",{className:"w-7 h-7 rounded-full overflow-hidden bg-primary-500/20 border border-primary-500/30",children:(0,s.jsx)(n.default,{src:"/racen-logo.jpg",alt:"RACEN",width:28,height:28,className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{className:"max-w-[80%] md:max-w-[70%] rounded-xl px-3 py-2 transition-colors duration-300 ".concat(u?"bg-primary-500/20 border border-primary-500/30 text-theme":"bg-theme-card border border-primary-500/10 text-theme"),children:[(0,s.jsx)("div",{className:"whitespace-pre-wrap text-xs md:text-sm leading-relaxed",children:t.content}),!u&&(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-primary-500/10",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-[10px] text-theme-muted",children:"Was this helpful?"}),(0,s.jsx)("button",{onClick:()=>h("up"),disabled:!!t.feedbackGiven,className:"p-1 rounded transition-colors ".concat("up"===t.feedbackGiven?"text-green-500 bg-green-500/10":"text-theme-muted hover:text-green-500 hover:bg-green-500/10"," disabled:cursor-not-allowed"),"aria-label":"Thumbs up",children:(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})})}),(0,s.jsx)("button",{onClick:()=>h("down"),disabled:!!t.feedbackGiven,className:"p-1 rounded transition-colors ".concat("down"===t.feedbackGiven?"text-red-500 bg-red-500/10":"text-theme-muted hover:text-red-500 hover:bg-red-500/10"," disabled:cursor-not-allowed"),"aria-label":"Thumbs down",children:(0,s.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})})})]}),o&&(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"What could be improved? (optional)",className:"w-full px-2 py-1.5 text-xs bg-theme-surface border border-primary-500/20 rounded-lg text-theme placeholder-gray-500 focus:outline-none focus:border-primary-500/50 resize-none transition-colors duration-300",rows:2}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{d&&(r(t.id,d,l),i(!1),c(""),m(null))},className:"px-2 py-1 text-[10px] bg-primary-500/20 hover:bg-primary-500/30 text-primary-500 rounded transition-colors",children:"Submit"}),(0,s.jsx)("button",{onClick:()=>{i(!1),c(""),m(null)},className:"px-2 py-1 text-[10px] bg-theme-surface hover:bg-primary-500/10 text-theme-muted rounded transition-colors border border-primary-500/10",children:"Cancel"})]})]})]})]})]})}function i(e){let{onSend:t,disabled:r}=e,[n,o]=(0,a.useState)(""),i=()=>{n.trim()&&!r&&(t(n),o(""))},l=n.trim().length>0&&!r;return(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"gradient-border rounded-full overflow-hidden",children:(0,s.jsxs)("div",{className:"flex items-center bg-theme-surface/90 rounded-full transition-colors duration-300",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},disabled:r,placeholder:"Ask me anything about JoveHeal...",className:"flex-1 px-5 py-3 text-sm bg-transparent text-theme placeholder-gray-500 focus:outline-none disabled:opacity-50"}),(0,s.jsx)("button",{onClick:i,disabled:!l,className:"mr-1.5 p-2.5 rounded-full transition-all duration-200 ".concat(l?"bg-primary-500 hover:bg-primary-600 glow cursor-pointer":"bg-gray-600 cursor-not-allowed opacity-50"),"aria-label":"Send message",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})})})}var l=r(8546);function c(e){let{onReset:t}=e,{theme:r,toggleTheme:a}=(0,l.F)();return(0,s.jsx)("header",{className:"sticky top-0 z-50 backdrop-blur-md bg-theme-surface/90 header-bg border-b border-primary-500/10 transition-colors duration-300",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-2",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"w-24 hidden md:block"}),(0,s.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,s.jsxs)("h1",{className:"text-2xl md:text-3xl font-light tracking-[0.4em] md:tracking-[0.6em] text-white uppercase",children:["R",(0,s.jsx)("span",{className:"text-primary-400",children:"."}),"A",(0,s.jsx)("span",{className:"text-primary-400",children:"."}),"C",(0,s.jsx)("span",{className:"text-primary-400",children:"."}),"E",(0,s.jsx)("span",{className:"text-primary-400",children:"."}),"N"]}),(0,s.jsx)("p",{className:"text-[10px] md:text-xs tracking-[0.15em] md:tracking-[0.2em] text-gray-400 mt-0.5 uppercase font-normal",children:"Real Time Advisor for Coaching, Education & Navigation"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:a,className:"p-2 rounded-lg btn-theme","aria-label":"Toggle theme",children:"dark"===r?(0,s.jsx)("svg",{className:"w-4 h-4 text-primary-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,s.jsx)("svg",{className:"w-4 h-4 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})}),(0,s.jsxs)("button",{onClick:t,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg btn-theme text-theme",children:[(0,s.jsx)("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Chat"]})]})]})})})}function d(){return(0,s.jsx)("div",{className:"flex justify-start message-enter",children:(0,s.jsx)("div",{className:"bg-theme-card border border-primary-500/10 rounded-2xl px-5 py-4 transition-colors duration-300",children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full typing-dot"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full typing-dot"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-primary-400 rounded-full typing-dot"})]})})})}function m(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!1),[l,m]=(0,a.useState)(""),u=(0,a.useRef)(null);(0,a.useEffect)(()=>{m("session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)))},[]),(0,a.useEffect)(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[e,r]);let h=async s=>{if(!s.trim()||r)return;let a={id:"msg_".concat(Date.now()),role:"user",content:s.trim(),timestamp:new Date};t(e=>[...e,a]),n(!0);try{let r=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s.trim(),session_id:l,conversation_history:e.map(e=>({role:e.role,content:e.content}))})}),a=await r.json(),n={id:"msg_".concat(Date.now(),"_assistant"),role:"assistant",content:a.response||"I apologize, but I encountered an issue. Please try again.",sources:a.sources||[],timestamp:new Date,feedbackGiven:null};t(e=>[...e,n])}catch(r){console.error("Error sending message:",r);let e={id:"msg_".concat(Date.now(),"_error"),role:"assistant",content:"I apologize, but I encountered a connection issue. Please try again.",timestamp:new Date};t(t=>[...t,e])}finally{n(!1)}},x=async(e,r,s)=>{try{await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:l,message_id:e,feedback:r,comment:s})}),t(t=>t.map(t=>t.id===e?{...t,feedbackGiven:r}:t))}catch(e){console.error("Error submitting feedback:",e)}},p=async()=>{try{await fetch("/api/chat/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:l})}),t([]),m("session_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)))}catch(e){console.error("Error resetting conversation:",e)}};return(0,s.jsxs)("main",{className:"flex min-h-screen flex-col bg-theme transition-colors duration-300",children:[(0,s.jsx)(c,{onReset:p}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col max-w-3xl mx-auto w-full px-4",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto py-6 space-y-4",children:[0===e.length&&(0,s.jsx)("div",{className:"flex-1 flex items-center justify-center min-h-[60vh]",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xl font-light text-theme-muted",children:"Welcome to R.A.C.E.N"}),(0,s.jsx)("p",{className:"text-sm mt-2 text-theme-muted opacity-70",children:"Ask me anything about JoveHeal's services and programs"})]})}),e.map(e=>(0,s.jsx)(o,{message:e,onFeedback:x},e.id)),r&&(0,s.jsx)(d,{}),(0,s.jsx)("div",{ref:u})]}),(0,s.jsx)("div",{className:"sticky bottom-0 pb-6 pt-4",children:(0,s.jsx)(i,{onSend:h,disabled:r})})]})]})}},8546:function(e,t,r){"use strict";r.d(t,{F:function(){return i},ThemeProvider:function(){return o}});var s=r(7437),a=r(2265);let n=(0,a.createContext)({theme:"dark",toggleTheme:()=>{}});function o(e){let{children:t}=e,[r,o]=(0,a.useState)("dark"),[i,l]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{l(!0);let e=localStorage.getItem("racen-theme");e&&("dark"===e||"light"===e)&&o(e)},[]),(0,a.useEffect)(()=>{i&&(document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(r),localStorage.setItem("racen-theme",r))},[r,i]),(0,s.jsx)(n.Provider,{value:{theme:r,toggleTheme:()=>{o(e=>"dark"===e?"light":"dark")}},children:(0,s.jsx)("div",{className:i?r:"dark",children:t})})}function i(){return(0,a.useContext)(n)}}},function(e){e.O(0,[648,971,23,744],function(){return e(e.s=8746)}),_N_E=e.O()}]);